var js_ffi={run:function(cfg){let allocations=[void 0,null,console,window,document],empty=[];function allocate(e){const n=empty.length>0?empty.pop():allocations.length;return allocations[n]=e,n}function allocator_release(e){e>4&&(delete allocations[e],empty.push(e))}function allocator_get(e){if(e<0)return;const n=allocations[e];return 0===e||n||console.error(`Asked for ${e} after it was released.`),n}let functions=[],mod=null;const TYPE_NOTHING=0,TYPE_NUM=1,TYPE_STRING=2,TYPE_BOOL=3,TYPE_FUNCTION=4,TYPE_OBJ=5,TYPE_UINT8_ARRAY=6,TYPE_INT8_ARRAY=7,TYPE_UINT8CLAMPED_ARRAY=8,TYPE_INT16_ARRAY=9,TYPE_UINT16_ARRAY=10,TYPE_INT32_ARRAY=11,TYPE_UINT32_ARRAY=12,TYPE_F32_ARRAY=13,TYPE_F64_ARRAY=14,TYPE_BI64_ARRAY=15,TYPE_BUI64_ARRAY=16,utf8dec=new TextDecoder("utf-8"),utf8enc=new TextEncoder("utf-8");function createString(e){let n=utf8enc.encode(e+String.fromCharCode(0)),t=n.length,o=mod.instance.exports.jsffimalloc(t);return new Uint8Array(mod.instance.exports.memory.buffer).set(n,o),o}function getStringFromMemory(e,n){const t=new Uint8Array(e),o=[];let r=n;for(;0!==t[r];)o.push(t[r]),r++;return utf8dec.decode(new Uint8Array(o))}function getTypedArrayFromMemory(e,n,t,o){const r=new Uint32Array(n),c=(new e(n),r[t/4]),s=r[t/4+1];return new e(n.slice(s,s+c*o))}function convertArgument(e,n){if(e==TYPE_NUM);else if(e==TYPE_NOTHING)n=void 0;else if(e==TYPE_STRING)n=getStringFromMemory(mod.instance.exports.memory.buffer,n);else if(e==TYPE_BOOL)n=0!=n;else if(e==TYPE_OBJ)n=allocator_get(n);else if(e==TYPE_FUNCTION){let e=n;n=function(n,t,o,r,c,s,a,l,f,m){let i=arguments.length;0===i?mod.instance.exports.jsfficallback(e,0,0,0,0,0,0,0,0,0,0):1===i?mod.instance.exports.jsfficallback(e,convertResponse(n),0,0,0,0,0,0,0,0,0):2===i?mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),0,0,0,0,0,0,0,0):3===i?mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),convertResponse(o),0,0,0,0,0,0,0):4===i?mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),convertResponse(o),convertResponse(r),0,0,0,0,0,0):5===i?mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),convertResponse(o),convertResponse(r),convertResponse(c),0,0,0,0,0):6===i?mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),convertResponse(o),convertResponse(r),convertResponse(c),convertResponse(s),0,0,0,0):7===i?mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),convertResponse(o),convertResponse(r),convertResponse(c),convertResponse(s),convertResponse(a),0,0,0):8===i?mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),convertResponse(o),convertResponse(r),convertResponse(c),convertResponse(s),convertResponse(a),convertResponse(l),0,0):9===i?mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),convertResponse(o),convertResponse(r),convertResponse(c),convertResponse(s),convertResponse(a),convertResponse(l),convertResponse(f),0):10===i&&mod.instance.exports.jsfficallback(e,convertResponse(n),convertResponse(t),convertResponse(o),convertResponse(r),convertResponse(c),convertResponse(s),convertResponse(a),convertResponse(l),convertResponse(f),convertResponse(m))}}else if(e==TYPE_UINT8_ARRAY)n=getTypedArrayFromMemory(Uint8Array,mod.instance.exports.memory.buffer,n,1);else if(e==TYPE_INT8_ARRAY)n=getTypedArrayFromMemory(Int8Array,mod.instance.exports.memory.buffer,n,1);else if(e==TYPE_F32_ARRAY)n=getTypedArrayFromMemory(Float32Array,mod.instance.exports.memory.buffer,n,4);else if(e==TYPE_F64_ARRAY)n=getTypedArrayFromMemory(Float64Array,mod.instance.exports.memory.buffer,n,8);else if(e==TYPE_INT32_ARRAY)n=getTypedArrayFromMemory(Int32Array,mod.instance.exports.memory.buffer,n,4);else if(e==TYPE_UINT32_ARRAY)n=getTypedArrayFromMemory(Uint32Array,mod.instance.exports.memory.buffer,n,4);else if(e==TYPE_INT16_ARRAY)n=getTypedArrayFromMemory(Int16Array,mod.instance.exports.memory.buffer,n,2);else if(e==TYPE_UINT16_ARRAY)n=getTypedArrayFromMemory(Uint16Array,mod.instance.exports.memory.buffer,n,2);else if(e==TYPE_BI64_ARRAY)n=getTypedArrayFromMemory(BigInt64Array,mod.instance.exports.memory.buffer,n,8);else if(e==TYPE_BUI64_ARRAY)n=getTypedArrayFromMemory(BigUint64Array,mod.instance.exports.memory.buffer,n,8);else{if(e!=TYPE_UINT8CLAMPED_ARRAY)throw error("Unknown data type");n=getTypedArrayFromMemory(Uint8ClampedArray,mod.instance.exports.memory.buffer,n,1)}return n}function convertResponse(e){const n=typeof e;return"string"===n?createString(e):"number"===n?e:void 0===e?0:null===e?1:!0===e?1:!1===e?0:allocate(e)}"string"==typeof cfg&&(cfg={path:cfg}),fetch(cfg.path).then(e=>e.arrayBuffer()).then(bytes=>WebAssembly.instantiate(bytes,{env:{jsffirelease:function(e){allocator_release(e)},jsffiregister:function(code){code=getStringFromMemory(mod.instance.exports.memory.buffer,code);let id=functions.length;return functions.push(eval(code)),id},jsfficall0:function(e,n){return convertResponse(functions[n].call(allocator_get(e)))},jsfficall1:function(e,n,t,o){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o)))},jsfficall2:function(e,n,t,o,r,c){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c)))},jsfficall3:function(e,n,t,o,r,c,s,a){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c),convertArgument(s,a)))},jsfficall4:function(e,n,t,o,r,c,s,a,l,f){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c),convertArgument(s,a),convertArgument(l,f)))},jsfficall5:function(e,n,t,o,r,c,s,a,l,f,m,i){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c),convertArgument(s,a),convertArgument(l,f),convertArgument(m,i)))},jsfficall6:function(e,n,t,o,r,c,s,a,l,f,m,i,u,A){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c),convertArgument(s,a),convertArgument(l,f),convertArgument(m,i),convertArgument(u,A)))},jsfficall7:function(e,n,t,o,r,c,s,a,l,f,m,i,u,A,v,p){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c),convertArgument(s,a),convertArgument(l,f),convertArgument(m,i),convertArgument(u,A),convertArgument(v,p)))},jsfficall8:function(e,n,t,o,r,c,s,a,l,f,m,i,u,A,v,p,R,g){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c),convertArgument(s,a),convertArgument(l,f),convertArgument(m,i),convertArgument(u,A),convertArgument(v,p),convertArgument(R,g)))},jsfficall9:function(e,n,t,o,r,c,s,a,l,f,m,i,u,A,v,p,R,g,y,d){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c),convertArgument(s,a),convertArgument(l,f),convertArgument(m,i),convertArgument(u,A),convertArgument(v,p),convertArgument(R,g),convertArgument(y,d)))},jsfficall10:function(e,n,t,o,r,c,s,a,l,f,m,i,u,A,v,p,R,g,y,d,_,T){return convertResponse(functions[n].call(allocator_get(e),convertArgument(t,o),convertArgument(r,c),convertArgument(s,a),convertArgument(l,f),convertArgument(m,i),convertArgument(u,A),convertArgument(v,p),convertArgument(R,g),convertArgument(y,d),convertArgument(_,T)))}}}).then(e=>{mod=e,cfg.onLoad&&cfg.onLoad(e),e.instance.exports.main()}))}};class WasmModule extends HTMLElement{connectedCallback(){let e=this.getAttribute("src");if(!e)return void console.error("no 'src' attribute specified for wasm-module");let n=this;js_ffi.run({path:e,onLoad:e=>{n.module=e}})}}window.customElements.define("wasm-module",WasmModule);
